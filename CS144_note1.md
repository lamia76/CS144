source End-host(Internet model)|
---|
Application（应用层）(对应OSI中表现层和应用层)|
Transport（传输层）(对应OSI传输层和应用层)|
Network（网络层）(于OSI基本一致)|
Link（数据链路层）(对应OSI中链路层和物理层)|

OSI model|
---|
Application|
Presentation|
Session|
Transport|
Network|
Link|
Physical|

# 四层互联网模型

- 应用程序追求可靠的双向字节流

## 数据链路层

### 通过终端主机和路由器之间或路由器之间的单个链接来传送数据

- 数据以数据包形式传递
- 数据包包含发送的数据以及表头（包含各种信息）
- 链路层的工作是一次通过一个链路传送数据
## 网络层
### 端到端提供数据报，必须使用协议
- 从源端通过Internet端到端传输数据包到目的地
- 网络层数据包称为数据报
- 网络将数据包交给链路层
- 另一端路由器的链路层将包交给网络层检查信息再交回给链路层将数据报路由到最终目的地一跳，如此往复达成目的
- 网络层无需关心链路层的方式
- 需使用协议
## 传输层
### 保证端到端正确，有序传输数据，控制拥塞

- 常见为tcp，TCP/IP为应用程序同时使用两者的一种说法
- tcp复杂可靠，udp相对简单但不可靠
## 应用层

### 使用特定于应用程序的两个应用程序之间的双向可靠字节流

- 每一层与其对等层通信，无需考虑下层如何获取数据

## IP服务四个属性

属性| 表现                 |
---|--------------------|
数据报| 独立路径，一跳转一跳         |
不可靠| 可能丢包               |
  尽力   | 不到必要时刻不会丢弃数据       |
无连接| 不保留通信相关状态，不以建立连接开始 |

## 为何如此简单？

- 为了保持网络简单，愚蠢和最小化，更快,更简单,降低维护和构建成本
- 端对端原则，尽可能在端主机实现功能，尽量在网络边缘实现大部分功能，网络核心功能只提供标准服务
- 允许在顶部构建各种可靠或不可靠的服务，让应用程序自己选择
- 适用于任何链路层，对链路层的期望极少 —— ~~甚至能在信鸽上运行~~

## 一些细节功能

- 生存时间（TTL），防止产生循环
- 会对过长的数据包分段
- 使用表头校验和来减少数据包传送到错误目的地的概率
- 允许新版IP——IPV4到IPV6
- 允许向报头添加新的字段 （好处：可以添加新功能。坏处：需要路由器的其他功能，违反了简单的原则）
